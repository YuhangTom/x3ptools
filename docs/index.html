<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tools for Working with 3D Surface Measurements • x3ptools</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="jquery.sticky-kit.min.js"></script><script src="pkgdown.js"></script><meta property="og:title" content="Tools for Working with 3D Surface Measurements">
<meta property="og:description" content="The x3p file format  is specified in ISO standard 5436:2000 to describe 3d surface measurements. 'x3ptools' allows reading, writing and basic modifications to the 3D surface measurements.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">x3ptools</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/heike/x3ptools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    

    
    
<div class="contents">

<div id="x3ptools" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#x3ptools" class="anchor"></a>x3ptools</h1></div>
<!--[![CRAN Status](http://www.r-pkg.org/badges/version/x3ptools)](https://cran.r-project.org/package=x3ptools) [![CRAN RStudio mirror downloads](http://cranlogs.r-pkg.org/badges/x3ptools)](http://www.r-pkg.org/pkg/x3ptools) -->
<!--[![Downloads](http://cranlogs.r-pkg.org/badges/x3ptools?color=brightgreen)](https://cran.r-project.org/package=x3ptools)-->
</div>
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p><code>x3ptools</code> is not yet available from CRAN.</p>
<!--

```r
install.packages("x3ptools")
```
-->
<p>The development version is available from Github:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"heike/x3ptools"</span>, <span class="dt">build_vignettes =</span> <span class="ot">TRUE</span>)</code></pre></div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="reading-and-writing-x3p-files" class="section level3">
<h3 class="hasAnchor">
<a href="#reading-and-writing-x3p-files" class="anchor"></a>Reading and writing x3p files</h3>
<p><code>read_x3p</code> and <code>write_x3p</code> are the two functions allows us to read x3p files and write to x3p files.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(x3ptools)
logo &lt;-<span class="st"> </span><span class="kw"><a href="reference/read_x3p.html">read_x3p</a></span>(<span class="kw">system.file</span>(<span class="st">"csafe-logo.x3p"</span>, <span class="dt">package=</span><span class="st">"x3ptools"</span>))
<span class="kw">names</span>(logo)</code></pre></div>
<pre><code>## [1] "header.info"    "surface.matrix" "feature.info"   "general.info"  
## [5] "matrix.info"</code></pre>
</div>
<div id="visualizing-x3p-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#visualizing-x3p-objects" class="anchor"></a>Visualizing x3p objects</h3>
<p>The function <code>image_x3p</code> uses <code>rgl</code> to render a 3d object in a separate window. The user can then interact with the 3d surface (zoom and rotate). In case a file name is specified in the function call the resulting surface is saved in a file (the extension determines the actual file format of the image).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/image_x3p.html">image_x3p</a></span>(logo, <span class="dt">file=</span><span class="ot">NULL</span>)</code></pre></div>
<p><img src="inst/images/logo-rgl.png"><!-- --></p>
</div>
<div id="casting-between-data-types" class="section level3">
<h3 class="hasAnchor">
<a href="#casting-between-data-types" class="anchor"></a>Casting between data types</h3>
<p>The functions <code>x3p_to_df</code> and <code>df_to_x3p</code> allow casting between an x3p format and an x-y-z data set:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">logo_df &lt;-<span class="st"> </span><span class="kw"><a href="reference/x3p_to_df.html">x3p_to_df</a></span>(logo)
<span class="kw">head</span>(logo_df)</code></pre></div>
<pre><code>##           x          y value
## 1 0.000e+00 0.00026961 4e-07
## 2 6.450e-07 0.00026961 4e-07
## 3 1.290e-06 0.00026961 4e-07
## 4 1.935e-06 0.00026961 4e-07
## 5 2.580e-06 0.00026961 4e-07
## 6 3.225e-06 0.00026961 4e-07</code></pre>
<p>When converting from the x3p format to a data frame, the values from the surface matrix are interpreted as heights (saved as <code>value</code>) on an x-y grid. The dimension of the matrix sets the number of different x and y levels, the information in <code>header.info</code> allows us to scale the levels to the measured quantities. Similarly, when moving from a data frame to a surface matrix, the assumption is that measurements are taken on an equi-spaced and complete grid of x-y values. The information on the resolution (i.e. the spacing between consecutive x and y locations) is saved in form of the header info, which is added to the list. General info and feature info can not be extracted from the measurements, but have to be recorded with other means.</p>
<p>Once data is in a regular data frame, we can use our regular means to visualize these raster images, e.g. using <code>ggplot2</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)
logo_df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/ggplot">ggplot</a></span>(<span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/aes">aes</a></span>( <span class="dt">x=</span> x, <span class="dt">y=</span>y, <span class="dt">fill=</span> value)) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/geom_tile">geom_tile</a></span>() <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/ggplot2/topics/scale_gradient">scale_fill_gradient2</a></span>(<span class="dt">midpoint=</span><span class="fl">4e-7</span>)</code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
</div>
<div id="elementary-operations" class="section level3">
<h3 class="hasAnchor">
<a href="#elementary-operations" class="anchor"></a>Elementary operations</h3>
<div id="rotation-and-transposition" class="section level4">
<h4 class="hasAnchor">
<a href="#rotation-and-transposition" class="anchor"></a>Rotation and Transposition</h4>
<p><code>rotate_x3p</code> rotates an x3p image in steps of 90 degrees, <code>transpose_x3p</code> transposes the surface matrix of an image and updates the corresponding meta information. The function <code>y_flip_x3p</code> is a combination of transpose and rotation, that allows to flip the direction of the y axis to move easily from legacy ISO x3p scans to ones conforming to the most recent ISO standard.</p>
</div>
<div id="sampling" class="section level4">
<h4 class="hasAnchor">
<a href="#sampling" class="anchor"></a>Sampling</h4>
<p><code>sample_x3p</code> allows to sub-sample an x3p object to get a lower resolution image. In <code>sample_x3p</code> we need to set a sampling factor. A sample factor <code>m</code> of 2 means that we only use every 2nd value of the surface matrix, <code>m</code> of 5 means, we only use every fifth value:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(logo<span class="op">$</span>surface.matrix)</code></pre></div>
<pre><code>## [1] 741 419</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">logo_sample &lt;-<span class="st"> </span><span class="kw"><a href="reference/sample_x3p.html">sample_x3p</a></span>(logo, <span class="dt">m=</span><span class="dv">5</span>)
<span class="kw">dim</span>(logo_sample<span class="op">$</span>surface.matrix)</code></pre></div>
<pre><code>## [1] 149  84</code></pre>
</div>
<div id="interpolation" class="section level4">
<h4 class="hasAnchor">
<a href="#interpolation" class="anchor"></a>Interpolation</h4>
<p><code>interpolate_x3p</code> allows, like <code>sample_x3p</code>, to create a new x3p file at a new resolution, as specified in the parameters <code>resx</code> and <code>resy</code>. The new resolution should be lower (i.e. larger values for <code>resx</code> and <code>resy</code>) than the resolution specified as <code>IncrementX</code> and <code>IncrementY</code> in the header info of the x3p file. <code>interpolate_x3p</code> can also be used to interpolate missing values (set parameter <code>maxgap</code> according to specifications in <code><a href="http://www.rdocumentation.org/packages/zoo/topics/na.approx">zoo::na.approx</a></code>).</p>
</div>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2 class="hasAnchor">
<a href="#sidebar" class="anchor"></a>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/heike/x3ptools">https://​github.com/​heike/​x3ptools</a>
</li>
<li>Report a bug at <br><a href="https://github.com/heike/x3ptools/issues">https://​github.com/​heike/​x3ptools/​issues</a>
</li>
</ul>
<h2>License</h2>
<p><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE.html">LICENSE</a></p>
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Heike Hofmann <br><small class="roles"> Author, maintainer </small> </li>
<li>Ganesh Krishnan <br><small class="roles"> Author </small> </li>
<li>Eric Hare <br><small class="roles"> Author </small> </li>
</ul>
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=x3ptools"><img src="http://www.r-pkg.org/badges/version/x3ptools" alt="CRAN_Status_Badge"></a></li>
<li><a href="commits/master"><img src="https://img.shields.io/badge/Package%20version-0.0.1-orange.svg?style=flat-square" alt="packageversion"></a></li>
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://travis-ci.org/heike/x3ptools"><img src="https://travis-ci.org/heike/x3ptools.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="/commits/master"><img src="https://img.shields.io/badge/last%20change-2018--03--14-yellowgreen.svg" alt="Last-changedate"></a></li>
</ul>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Heike Hofmann, Ganesh Krishnan, Eric Hare.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
